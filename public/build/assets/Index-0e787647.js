import{h as n,k as X,e as Y,o as U,c as S,b as e,s as J,q as N,a as v,u as x,w as Q,j as d,v as D,t as u,z as C,A as i,F as Z,B as ee}from"./app-45ec4fab.js";import{S as te}from"./sweetalert2.all-2a96c036.js";import{P as m,D as h,c as oe,s as y,a as A}from"./dataTables.select-0eae1207.js";import{L as V}from"./vue3-datepicker-7c15d454.js";const se={className:"flex justify-center"},le={className:"w-full"},ae={className:"bg-blue-400 border border-blue-400 text-blue-700 px-4 py-3 rounded relative",role:"alert"},ne={className:"flex justify-around items-center"},de=e("i",{className:"fa-solid fa-circle-plus mx-1"},null,-1),ie=e("i",{className:"fa-solid fa-circle-plus mx-1"},null,-1),re=e("i",{className:"fa-solid fa-circle-plus mx-1"},null,-1),ue={class:"flex justify-center my-3"},ce={class:"w-full"},me={class:"bg-gray-400 border border-blue-400 text-blue-700 px-4 py-3 rounded relative",role:"alert"},be={class:"flex justify-between items-center"},fe=e("label",{for:"datepicker",class:"block text-sm font-medium text-gray-700 mr-3"},"Selecciona una fecha",-1),pe={class:"flex items-center"},ge=e("button",{type:"button",class:"ml-2 px-4 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:border-blue-700 focus:ring-blue-300"}," Botón ",-1),ve={class:"flex justify-center my-3"},xe={class:"w-full"},he={class:"bg-gray-400 border border-blue-400 text-blue-700 px-4 py-3 rounded relative",role:"alert"},ye={class:"flex justify-between items-center"},_e=e("label",{for:"startDate",class:"block text-sm font-medium text-gray-700 mr-3"},"Desde",-1),we=e("label",{for:"endDate",class:"block text-sm font-medium text-gray-700 ml-4 mr-3"},"Hasta",-1),ke={className:"border px-10 py-5  border-primary-400 rounded-md shadow   mt-3"},Ne={className:"md:col-span-12 lg:col-span-12 col-span-12"},De={class:"overflow-x-auto my-5"},Ce=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"Id"),e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"fecha"),e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"codigo_sede"),e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"ticket"),e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"venta"),e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"utilidad")])],-1),Ve={id:"default-modal",class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 overflow-y-auto"},Ee={class:"bg-white rounded-lg shadow-lg max-w-md w-full h-full overflow-y-auto"},Te={class:"flex items-center justify-between p-4 border-b"},je={class:"text-xl font-semibold text-gray-900"},Ie=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Re=e("span",{class:"sr-only"},"Cerrar Modal",-1),Me=[Ie,Re],Ue={class:"p-4 space-y-4 overflow-y-auto"},Se={className:"my-2"},Ae={className:"text-xl font-thin mb-4"},Be={className:"mb-4"},Oe=e("label",{for:"fecha",className:"block mb-1"},"FECHA",-1),$e=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese fecha.",-1),ze={className:"mb-4"},Fe=e("label",{for:"codigo_sede",className:"block mb-1"},"CODIGO SEDE",-1),Le=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese codigo de sede.",-1),Pe={className:"mb-4"},qe=e("label",{for:"ticket",className:"block mb-1"},"NUMERO DE TICKET",-1),He=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese número de ticket.",-1),Ge={className:"mb-4"},Ke=e("label",{for:"venta",className:"block mb-1"},"MONTO DE VENTA",-1),We=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese venta.",-1),Xe={className:"mb-4"},Ye=e("label",{for:"ruc",className:"block mb-1"},"UTILIDAD",-1),Je=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese utilidad.",-1),Qe={class:"flex items-center justify-end p-4 border-t"},Ze=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5"},"Aceptar",-1),et={id:"default-modal",class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 overflow-y-auto"},tt={class:"bg-white rounded-lg shadow-lg max-w-md w-full h-full overflow-y-auto"},ot={class:"flex items-center justify-between p-4 border-b"},st={class:"text-xl font-semibold text-gray-900"},lt=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),at=e("span",{class:"sr-only"},"Cerrar Modal",-1),nt=[lt,at],dt={class:"p-4 space-y-4 overflow-y-auto"},it={className:"my-2"},rt={className:"text-xl font-thin mb-4"},ut={className:"mb-4"},ct=e("label",{for:"fecha",className:"block mb-1"},"FECHA",-1),mt=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese fecha.",-1),bt={className:"mb-4"},ft=e("label",{for:"codigo_sede",className:"block mb-1"},"CODIGO DE SEDE",-1),pt=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese codigo de sede.",-1),gt={className:"mb-4"},vt=e("label",{for:"ticket",className:"block mb-1"},"TICKET",-1),xt=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese número de ticket.",-1),ht={className:"mb-4"},yt=e("label",{for:"venta",className:"block mb-1"},"MONTO DE VENTA",-1),_t=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese venta.",-1),wt={className:"mb-4"},kt=e("label",{for:"ruc",className:"block mb-1"},"UTILIDAD",-1),Nt=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese utilidad.",-1),Dt={class:"flex items-center justify-end p-4 border-t"},Ct=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5"},"Aceptar",-1),Vt={id:"default-modal",class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 overflow-y-auto"},Et={class:"bg-white rounded-lg shadow-lg max-w-md w-full h-screen-70 overflow-y-auto"},Tt={class:"flex items-center justify-between p-4 border-b"},jt={class:"text-xl font-semibold text-gray-900"},It=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Rt=e("span",{class:"sr-only"},"Cerrar Modal",-1),Mt=[It,Rt],Ut={class:"p-4 space-y-4 overflow-y-auto"},St={class:"my-2"},At={class:"text-xl font-thin mb-4"},Bt=e("div",{class:"mb-4"},[e("label",{for:"documento",class:"block text-sm font-medium text-gray-700"},"Subir documento"),e("input",{type:"file",id:"documento",name:"documento",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})],-1),Ot={class:"flex items-center justify-end p-4 border-t"},$t=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5"},"Subir Documento",-1),qt={__name:"Index",props:{datos:Array},setup(B){m.use(h),m.use(h);const O=B,r=n(),E=n([]),T=n([]),b=n([]),$=n(!1),f=n(!1),j=n(""),c=n(!1),p=n(""),_=n(!1),I=n(new Date),w=n(new Date),k=n(new Date),g=n(!1),z=l=>{modalTitleUpload.value=l,g.value=!0,console.log("mensjae de exito")};X(()=>{b.value=O.datos,console.log(b)}),Y(()=>{$.value=!0,r.value.dt.on("deselect",q),r.value.dt.on("deselect",R)});const a=n({id:"",fecha:"",codigo_sede:"",ticket:"",venta:"",utilidad:""}),s=n({id:"",fecha:"",codigo_sede:"",ticket:"",venta:"",utilidad:""});m.use(h),m.use(h),E.value=[{data:null,render:function(l,t,o,M){return M.row+1}},{data:"fecha"},{data:"codigo_sede"},{data:"ticket"},{data:"venta"},{data:"utilidad"}],T.value=[{title:"Transaction",extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-500 text-white px-4 py-2 rounded my-2 hover:bg-green-600 focus:outline-none"},{title:"Transaction",extend:"print",text:'<i class="fa-solid fa-print"></i> PRINT',className:"bg-gray-800 text-white px-4 py-2 rounded my-2 hover:bg-gray-900 focus:outline-none"},{title:"Transaction",extend:"copy",text:'<i class="fa-solid fa-copy"></i> COPY',className:"bg-gray-400 text-white px-4 py-2 rounded my-2 hover:bg-gray-500 focus:outline-none"}];const F=()=>{const l=r.value.dt.rows({selected:!0}).data().toArray();if(l.length>0){const t=l[0].id,o=l[0].contacto;te.mixin({buttonStyling:!0}).fire({title:"¿Está seguro de querer borrar el registro "+o+":"+t+"?",icon:"question",showCancelButton:!0,confirmButtonText:'<i class="fa fa-solid fa-check"></i> Sí, borrar',cancelButtonText:'<i class="fa fa-solid fa-times"></i> Cancelar'}).then(W=>{W.isConfirmed&&oe(plataforma,"https://reportes.kingtech.pe/transaction"+t,"")})}else y("Debe seleccionar una fila antes de poder borrarla","error")},L=l=>{j.value=l,f.value=!0,console.log("mensjae de exito")},P=l=>{if(r.value.dt.rows({selected:!0}).count()===0){y("Debe seleccionar una fila antes de editar","error");return}const o=r.value.dt.rows({selected:!0}).data().toArray()[0];if(!o){y("No se encontraron datos para la fila seleccionada","error");return}s.value.fecha=o.fecha,s.value.codigo_sede=o.codigo_sede,s.value.ticket=o.ticket,s.value.venta=o.venta,s.value.utilidad=o.utilidad,console.log(b),p.value=l,c.value=!0},R=l=>{const t=r.value.dt.rows({selected:!0}).count();_.value=t>0},q=l=>{const t=r.value.dt.rows({selected:!0}).count();_.value=t>0},H=()=>{const l=r.value.dt.rows({selected:!0}).data().toArray();l.length>0?(l[0],s.value.codigo=selectedRowsData.fecha,s.value.grupo=selectedRowsData.codigo_sede,s.value.administrador=selectedRowsData.ticket,s.value.dni=selectedRowsData.venta,s.value.ruc=selectedRowsData.utilidad,console.log(s),A("PUT",s.value,"https://reportes.kingtech.pe/transaction/"+id,"")):y("debe selccionar uan fila antes de poder editarla","error")},G=()=>{a.value.id,a.value.fecha,a.value.codigo_sede,a.value.ticket,a.value.venta,a.value.utilidad,console.log(a),A("POST",a.value,"https://reportes.kingtech.pe/transaction",""),f.value=!1},K=()=>{const l=new FormData;l.append("file",fileInput.value.files[0]),ee.post("/api/importar-clientes",l,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log("Archivo importado correctamente:",t.data.message)}).catch(t=>{console.error("Error al importar archivo:",t)})};return(l,t)=>(U(),S(Z,null,[e("div",se,[e("div",le,[e("div",ae,[e("div",ne,[_.value?J("",!0):(U(),S("button",{key:0,"data-modal-target":"default-modal",onClick:t[0]||(t[0]=o=>L("Crear")),"data-modal-toggle":"default-modal",className:"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," Crear Registro ")),e("button",{onClick:t[1]||(t[1]=o=>P("Editar")),className:" btn btn-lg block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[de,N("Editar Registro ")]),e("button",{onClick:t[2]||(t[2]=o=>z("Subir Documento en Excel")),className:" btn btn-lg block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[ie,N("Subir Excel ")]),e("button",{onClick:t[3]||(t[3]=o=>F()),className:"btn btn-lg block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[re,N(" Borrar Registro ")])])])])]),e("div",ue,[e("div",ce,[e("div",me,[e("div",be,[fe,e("div",pe,[v(x(V),{modelValue:I.value,"onUpdate:modelValue":t[4]||(t[4]=o=>I.value=o),id:"datepicker",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,8,["modelValue"]),ge])])])])]),e("div",ve,[e("div",xe,[e("div",he,[e("div",ye,[_e,v(x(V),{modelValue:w.value,"onUpdate:modelValue":t[5]||(t[5]=o=>w.value=o),id:"startDate",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,8,["modelValue"]),we,v(x(V),{modelValue:k.value,"onUpdate:modelValue":t[6]||(t[6]=o=>k.value=o),id:"endDate",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,8,["modelValue"]),e("button",{type:"button",class:"ml-4 px-4 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:border-blue-700 focus:ring-blue-300",onClick:t[7]||(t[7]=o=>l.filterByDates(w.value,k.value))}," Filtrar ")])])])]),e("div",ke,[e("div",Ne,[e("div",De,[v(x(m),{data:b.value,columns:E.value,ref_key:"table",ref:r,class:"display",options:{select:!0,responsive:!0,autoWidth:!1,dom:"Bfrtip",buttons:T.value,pageLength:10,scrollX:!0},onSelect:R},{default:Q(()=>[Ce]),_:1},8,["data","columns","options"])])])]),d(e("div",Ve,[e("div",Ee,[e("div",Te,[e("h3",je,u(p.value),1),e("button",{onClick:t[8]||(t[8]=o=>c.value=!1),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 flex justify-center items-center"},Me)]),e("div",Ue,[e("form",{onSubmit:C(H,["prevent"]),classNaem:"max-w-lg mx-auto border border-gray-300 p-6 my-5 rounded-lg overflow-y-auto"},[e("div",Se,[e("h2",Ae,u(p.value),1)]),e("div",Be,[Oe,d(e("input",{type:"text",id:"fecha",className:"form-input w-full","onUpdate:modelValue":t[9]||(t[9]=o=>s.value.fecha=o)},null,512),[[i,s.value.fecha]]),$e]),e("div",ze,[Fe,d(e("input",{type:"text",id:"codigo_sede",className:"form-input w-full","onUpdate:modelValue":t[10]||(t[10]=o=>s.value.codigo_sede=o)},null,512),[[i,s.value.codigo_sede]]),Le]),e("div",Pe,[qe,d(e("input",{type:"text",id:"ticket",className:"form-input w-full","onUpdate:modelValue":t[11]||(t[11]=o=>s.value.ticket=o)},null,512),[[i,s.value.ticket]]),He]),e("div",Ge,[Ke,d(e("input",{type:"text",id:"venta",className:"form-input w-full","onUpdate:modelValue":t[12]||(t[12]=o=>s.value.venta=o)},null,512),[[i,s.value.venta]]),We]),e("div",Xe,[Ye,d(e("input",{type:"text",id:"ruc",className:"form-input w-full","onUpdate:modelValue":t[13]||(t[13]=o=>s.value.utilidad=o)},null,512),[[i,s.value.utilidad]]),Je]),e("div",Qe,[Ze,e("button",{onClick:t[14]||(t[14]=o=>c.value=!1),type:"button",class:"ml-3 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 px-5 py-2.5"},"Rechazar")])],32)])])],512),[[D,c.value]]),d(e("div",et,[e("div",tt,[e("div",ot,[e("h3",st,u(j.value),1),e("button",{onClick:t[15]||(t[15]=o=>f.value=!1),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 flex justify-center items-center"},nt)]),e("div",dt,[e("form",{onSubmit:C(G,["prevent"]),classNaem:"max-w-lg mx-auto border border-gray-300 p-6 my-5 rounded-lg overflow-y-auto"},[e("div",it,[e("h2",rt,u(p.value),1)]),e("div",ut,[ct,d(e("input",{type:"text",id:"fecha",className:"form-input w-full","onUpdate:modelValue":t[16]||(t[16]=o=>a.value.fecha=o)},null,512),[[i,a.value.fecha]]),mt]),e("div",bt,[ft,d(e("input",{type:"text",id:"codigo_sede",className:"form-input w-full","onUpdate:modelValue":t[17]||(t[17]=o=>a.value.codigo_sede=o)},null,512),[[i,a.value.codigo_sede]]),pt]),e("div",gt,[vt,d(e("input",{type:"text",id:"ticket",className:"form-input w-full","onUpdate:modelValue":t[18]||(t[18]=o=>a.value.ticket=o)},null,512),[[i,a.value.ticket]]),xt]),e("div",ht,[yt,d(e("input",{type:"text",id:"venta",className:"form-input w-full","onUpdate:modelValue":t[19]||(t[19]=o=>a.value.venta=o)},null,512),[[i,a.value.venta]]),_t]),e("div",wt,[kt,d(e("input",{type:"text",id:"ruc",className:"form-input w-full","onUpdate:modelValue":t[20]||(t[20]=o=>a.value.utilidad=o)},null,512),[[i,a.value.utilidad]]),Nt]),e("div",Dt,[Ct,e("button",{onClick:t[21]||(t[21]=o=>c.value=!1),type:"button",class:"ml-3 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 px-5 py-2.5"},"Rechazar")])],32)])])],512),[[D,f.value]]),d(e("div",Vt,[e("div",Et,[e("div",Tt,[e("h3",jt,u(l.modalTitleUpload),1),e("button",{onClick:t[22]||(t[22]=o=>g.value=!1),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 flex justify-center items-center"},Mt)]),e("div",Ut,[e("form",{onSubmit:C(K,["prevent"]),enctype:"multipart/form-data",class:"max-w-lg mx-auto border border-gray-300 p-6 my-5 rounded-lg overflow-y-auto"},[e("div",St,[e("h2",At,u(l.modalTitleUpload),1)]),Bt,e("div",Ot,[$t,e("button",{onClick:t[23]||(t[23]=o=>g.value=!1),type:"button",class:"ml-3 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 px-5 py-2.5"},"Rechazar")])],32)])])],512),[[D,g.value]])],64))}};export{qt as default};
